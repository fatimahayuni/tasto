"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const P=new Set(["children","ref","style","className"]),g=(e={})=>Object==null?void 0:Object.keys(e).reduce((r,s)=>{var t,c;const o=e==null?void 0:e[s],n=`on${(c=(t=o==null?void 0:o.split("-"))==null?void 0:t.map(i=>i.charAt(0).toUpperCase()+i.slice(1)))==null?void 0:c.join("")}`;return r[n]=o,r},{}),d=new WeakMap,b=e=>{let r=d.get(e);return r===void 0&&(r=new Map,d.set(e,r)),r},E=({node:e,nameProp:r,valueProp:s,prevValueProp:o,event:n})=>{if(n!==void 0){if(s!==o){const t=b(e),c=t.has(n);let i=t.get(n);s!==void 0?c?i.handleEvent=s:(i={handleEvent:s},t.set(n,i),e.addEventListener(n,a=>i.handleEvent(a.detail))):c&&(t.delete(n),e.removeEventListener(n,i))}return}e[r]=s,s==null&&r in HTMLElement.prototype&&e.removeAttribute(r)},w=(e,r,s)=>{const o={},n={};return Object.entries(e).forEach(([t,c])=>{P.has(t)?o[t==="className"?"class":t]=c:r.has(t)||t in s.prototype?n[t]=c:o[t]=c}),{reactProps:o,customElProps:n}},M=({react:e,tag:r,elClass:s,schemaEvents:o})=>{const n=g(o),t=new Set(Object.keys(n??{})),c=e.forwardRef((i,a)=>{const f=e.useRef(new Map),p=e.useRef(null),{reactProps:h,customElProps:m}=w(i,t,s);return e.useLayoutEffect(()=>{if(p.current===null)return;const u=new Map;for(const l in m)E({node:p.current,nameProp:l,valueProp:m[l],prevValueProp:f.current.get(l),event:n[l]}),f.current.delete(l),u.set(l,i[l]);for(const[l,v]of f.current)E({node:p.current,nameProp:l,valueProp:void 0,prevValueProp:v,event:n[l]});f.current=u}),e.createElement(r??s.__tag,{...h,ref:e.useCallback(u=>{p.current=u,typeof a=="function"?a(u):a!==null&&(a.current=u)},[a])})});return c.displayName=s.name,c};exports.customElementToReactComponent=M;
