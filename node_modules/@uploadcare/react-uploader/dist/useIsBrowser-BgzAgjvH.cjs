"use strict";const f=require("react"),w=require("@uploadcare/file-uploader");function h(e){const t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const r in e)if(r!=="default"){const s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>e[r]})}}return t.default=e,Object.freeze(t)}const v=h(w),y=new Set(["children","ref","style","className"]),O=(e={})=>Object==null?void 0:Object.keys(e).reduce((t,r)=>{var s,n;const o=e==null?void 0:e[r],a=`on${(n=(s=o==null?void 0:o.split("-"))==null?void 0:s.map(c=>c.charAt(0).toUpperCase()+c.slice(1)))==null?void 0:n.join("")}`;return t[a]=o,t},{}),m=new WeakMap,j=e=>{let t=m.get(e);return t===void 0&&(t=new Map,m.set(e,t)),t},E=({node:e,nameProp:t,valueProp:r,prevValueProp:s,event:n})=>{if(n!==void 0){if(r!==s){const o=j(e),a=o.has(n);let c=o.get(n);r!==void 0?a?c.handleEvent=r:(c={handleEvent:r},o.set(n,c),e.addEventListener(n,u=>c.handleEvent(u.detail))):a&&(o.delete(n),e.removeEventListener(n,c))}return}e[t]=r,r==null&&t in HTMLElement.prototype&&e.removeAttribute(t)},U=(e,t,r)=>{const s={},n={};return Object.entries(e).forEach(([o,a])=>{y.has(o)?s[o==="className"?"class":o]=a:t.has(o)||o in r.prototype?n[o]=a:s[o]=a}),{reactProps:s,customElProps:n}},g=({react:e,tag:t,elClass:r,schemaEvents:s})=>{const n=O(s),o=new Set(Object.keys(n??{})),a=e.forwardRef((c,u)=>{const p=e.useRef(new Map),d=e.useRef(null),{reactProps:C,customElProps:P}=U(c,o,r);return e.useLayoutEffect(()=>{if(d.current===null)return;const i=new Map;for(const l in P)E({node:d.current,nameProp:l,valueProp:P[l],prevValueProp:p.current.get(l),event:n[l]}),p.current.delete(l),i.set(l,c[l]);for(const[l,b]of p.current)E({node:d.current,nameProp:l,valueProp:void 0,prevValueProp:b,event:n[l]});p.current=i}),e.createElement(t??r.__tag,{...C,ref:e.useCallback(i=>{d.current=i,typeof u=="function"?u(i):u!==null&&(u.current=i)},[u])})});return a.displayName=r.name,a},A=g({react:f,tag:"uc-config",elClass:v.Config}),M=g({react:f,tag:"uc-upload-ctx-provider",elClass:v.UploadCtxProvider,schemaEvents:v.UploadCtxProvider.EventType}),N=e=>{const t={},r={};return Object.entries(e).forEach(([s,n])=>{s.startsWith("on")?t[s]=n:r[s]=n}),{eventHandlers:t,config:r}},S="1.0.0",I="React-Uploader",_=()=>`${I}/${S}`,x=({children:e})=>e,R=()=>{const[e,t]=f.useState(!1);return f.useEffect(()=>{typeof window<"u"&&t(!0)},[]),e};exports.AdapterConfig=A;exports.AdapterUploadCtxProvider=M;exports.ConditionalSuspense=x;exports.b=g;exports.getCalcPropertyOfProps=N;exports.getUserAgentIntegration=_;exports.useIsBrowser=R;
